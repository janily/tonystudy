title: H5宣传页兼容多手机尺寸方案
date: 2015-08-21
categories:
- Vol1
tags:
- 前端
- html5
---

开门见山，这里说的“H5宣传页”是指移动端上通过翻页的形式呈现内容的页面。由于这种页面十分适合在手机上阅读，且逐页翻动的形式带给人整洁的感觉，因此现在这种页面广泛应用于推广产品、企业、活动等场景。

### 起因

贴图1（一个页面在不同手机尺寸下呈现）

这种页面为什么会有多手机尺寸难适配的问题？
这是由两个主要原因引起的：
1.不同品牌商产生的手机屏幕尺寸和比例均不一致；
2.页面的推广战场——各大社交软件所用的内置浏览器可视面积不一致；

上面的原因可以通过几张图来表述：
贴图2（不同厂商的尺寸比例）
贴图3（不同手机在不同浏览器的可视面积）

这个问题的好坏将会决定你的宣传页在所有手机上是否友好表现，并且决定了页面的宣传目的是否能顺利达到。

花一点篇幅解释了问题的原因，以下来分析兼容的可行性。

### 分析

iPhone6/6p出来之前，一般设计师都是以iPhone5的尺寸（320x568带导航条）来设计页面。而肾6面世后，一些设计师开始使用肾6的尺寸（375x667）来设计页面，如下图。

贴图4（iphone5和iphone6的尺寸）

然而对于前端开发来说是难度越来越大，为什么这么说？
首先肾6出来之前，iPhone系列的所有宽度都是320，只是高度不一样，而肾6和肾6p出来之后，不仅高度变高了，宽度也变宽了（375和414宽）。这意味着页面的元素需要变大，页面的内容需要增多，不然看起来就会很空。
那么问题就来了，伴随着页面内容越来越多，设计师的设计空间不断增大，小屏手机的情况如何呢？

贴图5（iphone4显示内容多的页面）

iphone4在一般带有上下导航栏的手机上遇到内容多的时候根本呈现不全！

那么有哪些做法？

###方案

> 1.固定宽度左右留白（古老派）
由于历史原因，320宽度是大部分机器的标配。
因此最简单的方法是定义每一个页的宽度为320，然后内容以iPHONE4高度从上排到下，多余的左右区域和底部区域以背景色留白。这样无论多宽多高的手机，内容都居中显示全，然而留白问题十分不美观，体验十分不好。

贴图6 （固定宽度左右留白.gif）

> 2.比例拉伸（暴力派）
尽管手机的尺寸很多，但是它们的长宽比却大部分是一样的。
根据这一点，我们可以想象假如按一个合理的长宽比去设计页面，其他页面进行缩小或扩大，不就可以适应大部分情况了？
因此，你可以用以下几步暴力解决兼容：
（1）以一个特定宽高排版内容，完成基准页面，然后（2）和（3）选其一；
（2）比较基准页面的长和宽，把大的一侧调整到页面100%，另一侧按比例伸缩，其余位置留白；
（3）比较基准页面的长和宽，把小的一侧调整到页面100%，另一侧按比例伸缩，上下均等裁剪多余空间，使其溢出隐藏；

两种方法都不会很完美，方法（2）保留了所有内容，然而牺牲了留白位置，方法（3）裁剪了边缘内容，可能会造成问题。
无独有偶，正好看到厂内同学peunzhang写了一个[pageResponse](https://github.com/peunzhang/pageResponse)工具，正是以比例拉伸的方法自动适应页面，有兴趣的朋友可以star一下，很赞。

然而，它也存在一些问题。
（1）基准页面定义十分不灵活，每一个页面可能有不同的基准尺寸。
（2）需要用到js的计算，兼容性是问题，而且ui工程师和web前端分工的时候也造成不方便。
（3）拉伸适应会导致页面的像素失真，而且裁剪的问题也导致内容显示不全，不是一种保险的做法。

> 3.内容集中背景自适应（灵活派）
这一种做法比较灵活。






